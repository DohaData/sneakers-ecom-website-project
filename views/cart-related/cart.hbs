<div class="container cart-page">
  <div class="cart-products">
    {{#each cartItems}}
      <div class="cart-item">
        <img src="{{imageUrl}}" alt="{{name}}" />
        <div class="cart-item-details">
          <h5>{{name}}</h5>
          <p>Price: ${{price}}</p>
          <p>Quantity: {{quantity}}</p>
          <p>Size: {{selectedSize}}</p>
        </div>
        <div class="cart-item-actions">
          <a
            href="/cart/decrease-product-quantity/{{_id}}?size={{selectedSize}}"
            class="btn btn-primary"
          >-</a>
          <a
            href="/cart/increase-product-quantity/{{_id}}?size={{selectedSize}}"
            class="btn btn-primary"
          >+</a>
          <a
            href="/cart/remove-product/{{_id}}?size={{selectedSize}}"
            class="btn btn-primary"
          >Remove</a>
        </div>
      </div>
    {{/each}}
  </div>
  <div class="cart-summary">
    <h3 class="summary-title">Summary</h3>
    <div class="summary-item">
      <p>Total Price: ${{totalPrice}}</p>
      <p>Estimated Shipping Date: {{estimatedShippingDate}}</p>
    </div>
    <form action="/cart/checkout" method="POST">
      {{#if isSignedOut}}
        <div class="personal-info-section">
          <h5>Personal Information</h5>
          <div class="form-group">
            <label for="firstName" class="form-label">First name</label>
            <input
              type="text"
              class="form-control"
              id="firstName"
              name="firstName"
              value="{{personalInfo.firstName}}"
              required
            />
            <label for="LastName" class="form-label">Last name</label>
            <input
              type="text"
              class="form-control"
              id="LastName"
              name="LastName"
              value="{{personalInfo.LastName}}"
              required
            />
            <label for="email" class="form-label">Email</label>
            <input
              type="text"
              class="form-control"
              id="email"
              name="email"
              value="{{personalInfo.email}}"
              required
            />
          </div>
        </div>
      {{/if}}
      <div class="address-section">
        <h5>Address</h5>
        <div class="form-group">
          <label for="houseNumber" class="form-label">House Number</label>
          <input
            type="text"
            class="form-control"
            id="houseNumber"
            name="houseNumber"
            value="{{address.houseNumber}}"
            required
          />
        </div>
        <div class="form-group">
          <label for="street" class="form-label">Street</label>
          <input
            type="text"
            class="form-control"
            id="street"
            name="street"
            value="{{address.street}}"
            required
          />
        </div>
        <div class="form-group">
          <label for="city" class="form-label">City</label>
          <input
            type="text"
            class="form-control"
            id="city"
            name="city"
            value="{{address.city}}"
            required
          />
        </div>
        <div class="form-group">
          <label for="state" class="form-label">State</label>
          <input
            type="text"
            class="form-control"
            id="state"
            name="state"
            value="{{address.state}}"
            required
          />
        </div>
        <div class="form-group">
          <label for="zip" class="form-label">Zip</label>
          <input
            type="text"
            class="form-control"
            id="zip"
            name="zip"
            value="{{address.zip}}"
            required
          />
        </div>
        <div class="form-group">
          <label for="country" class="form-label">Country</label>
          <input
            type="text"
            class="form-control"
            id="country"
            name="country"
            value="{{address.country}}"
            required
          />
        </div>
        <div class="form-group">
          <label for="additionalInfo" class="form-label">Additional Info</label>
          <input
            type="text"
            class="form-control"
            id="additionalInfo"
            name="additionalInfo"
            value="{{address.additionalInfo}}"
          />
        </div>
      </div>
      <div class="payment-section">
        <h5>Payment</h5>
        <div id="card-element">
          <!-- A Stripe Element will be inserted here. -->
        </div>
        <!-- Used to display form errors. -->
        <div id="card-errors" role="alert"></div>
      </div>
      <button type="submit" class="btn btn-primary order-button">Order</button>
    </form>
  </div>
</div>